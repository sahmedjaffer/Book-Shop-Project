<%- include('../partials/header') %>
<div class="card all-books-card">
  <h1 class="form-title">üìö All Books</h1>

  <form id="searchForm" action="/books/search/" method="GET" class="search-form">
    <div class="form-group">
      <label for="filter">Filter:</label>
      <select id="filter" name="filter">
        <option value="all">All</option>
        <option value="category">Category</option>
        <option value="publisher">Publisher</option>
        <option value="author">Author</option>
        <option value="title">Title</option>
        <option value="isbn">ISBN</option>
      </select>
    </div>
    <div class="form-group">
      <label for="search">Search:</label>
      <input type="text" id="search" name="search" placeholder="Search books...">
    </div>
    <button type="submit" id="searchButton" class="btn btn-primary">üîç Search</button>
  </form>

  <div class="book-grid">
    <% if (showAllBooks && showAllBooks.length > 0) { %>
      <% showAllBooks.forEach(book => { %>
        <div class="book-item">
          <a href="/books/<%= book._id %>" class="book-link">
            <img src="<%= book.image %>" alt="<%= book.title %>" width="100" height="150" class="book-image" />
            <p class="book-title"><%= book.title %></p>
          </a>
          <div class="book-meta">
            <p><strong>Category:</strong> <%= book.category %></p>
            <p><strong>Publisher:</strong> <%= book.publisher %></p>
            <p><strong>Author:</strong> <%= book.author?.name || 'No Author Info' %></p>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="no-books-message">
        No books found.
      </div>
    <% } %>
  </div>
</div>
<%- include('../partials/footer') %>