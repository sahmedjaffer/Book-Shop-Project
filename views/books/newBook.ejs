<%- include('../partials/header.ejs') %>
<div class="card new-book-card">
  <h2 class="form-title">âž• Add New Book</h2>
  <form action="/books" method="POST" class="form-vertical">
    <div class="form-group">
      <label for="isbn">ISBN:</label>
      <input type="text" id="isbn" name="isbn" required />
    </div>
    <div class="form-group">
      <label for="title">Title:</label>
      <input type="text" id="title" name="title" required />
    </div>
    <div class="form-group">
      <label for="category">Category:</label>
      <input type="text" id="category" name="category" required />
    </div>
    <div class="form-group">
      <label for="description">Description:</label>
      <textarea id="description" name="description" required rows="4"></textarea>
    </div>
    <div class="form-group">
      <label for="unitPrice">Unit Price:</label>
      <input type="number" step="0.01" id="unitPrice" name="unitPrice" required />
    </div>
    <div class="form-group">
      <label for="stock">Stock:</label>
      <input type="number" id="stock" name="stock" required />
    </div>
    <div class="form-group">
      <label for="publisher">Publisher:</label>
      <input type="text" id="publisher" name="publisher" required />
    </div>
    <div class="form-group">
      <label for="authorId">Select Existing Author:</label>
      <select id="authorId" name="authorId">
        <% if (authors.length === 0) { %>
          <option value="" selected>-- None / Add new --</option>
        <% } else { %>
          <option value="">-- None / Add new --</option>
          <% authors.forEach((author, index) => { %>
            <option value="<%= author._id %>" <%= index === 0 ? 'selected' : '' %>>
              <%= author.name %>
            </option>
          <% }) %>
        <% } %>
      </select>
    </div>
    <div id="new-author-fields" class="hide-author-fields">
      <p>If not in list, add new author below:</p>
      <label for="newAuthorName">New Author Name:</label>
      <input type="text" id="newAuthorName" name="newAuthorName" />
      <label for="newAuthorBiography">New Author Biography:</label>
      <input type="text" id="newAuthorBiography" name="newAuthorBiography" />
    </div>
    <div class="form-group">
      <label for="image">Image URL:</label>
      <input type="text" id="image" name="image" />
    </div>
    <button type="submit" class="btn btn-success mt-1">âž• Create Book</button>
    <div class="form-footer">
      <a href="/books" class="btn btn-primary">ðŸ”™ Back to All Books</a>
    </div>
  </form>
</div>
<script src="/js/authorFieldsToggle.js"></script>
<%- include('../partials/footer.ejs') %>
